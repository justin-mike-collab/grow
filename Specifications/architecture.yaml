$schema: "https://github.com/agile-learning-institute/stage0/blob/main/Schemas/architecture.schema.yaml"
$id: "https://github.com/justin-mike-collab/grow/blob/main/Specifications/architecture.yaml"
title: Architecture Specification for grow

architecture:
  organization: Justin-Mike-Collab
  product: grow
  environments:
    - name: local
    - name: development
    - name: staging
    - name: production
  domains:
    - name: runbook
      description: SRE Automation using Stage0 Runbook System for operational automation
      repos:
        - name: runbook_api
          description: Runbook Automation API Server
          template: agile-learning-institute/stage0_runbook_template
          publish: make
          type: api
          port: 9090
        - name: runbook_spa
          description: Runbook Automation Single Page Web Application (utility container, not a real repository)
          template: N/A
          type: spa_ref
          port: 9091
    - name: schema
      description: MongoDB Database Configuration and Management.
      repos:
        - name: mongodb_api
          description: MongoDB Configurator API Server
          template: agile-learning-institute/stage0_template_configurator_api
          publish: make
          type: api
          port: 9092
        - name: configurator_spa
          description: MongoDB Configurator SPA (utility container, not a real repository)
          template: N/A
          type: spa_ref 
          port: 9093
    - name: common_code
      description: Shared code used across multiple API or SPA code bases are published to private dependency management libraries (NPM /PYPI).
      repos:
        - name: api_utils
          description: Python PyPI API Utility Library
          template: agile-learning-institute/stage0_template_py_utils
          publish: pipenv
          type: api
          port: 9094
        - name: spa_utils
          description: Vue NPM SPA Utility Library
          template: agile-learning-institute/stage0_template_vue_utils
          publish: npm
          type: spa
          port: 9095
    - name: profile
      description: Sample Service Domain - use for each User Journey domain.
      data_domains:
        controls:
          - Profile 
          - Organization
        creates:
          - Event
        consumes:
          - Identity
      repos:
        - name: profile_api
          description: Profile API
          template: agile-learning-institute/stage0_template_flask_mongo
          publish: pipenv
          type: api
          port: 8389
        - name: profile_spa
          description: Profile SPA
          template: agile-learning-institute/stage0_template_vue_vuetify
          publish: npm
          type: spa
          port: 8390
    - name: mentor
      description: Mentor User Journey Domain
      data_domains:
        controls:
          - Resource
          - Path
          - Plan
          - Encounter
        creates:
          - Event
        consumes:
          - Profile
      repos:
        - name: mentor_api
          description: Mentor API
          template: agile-learning-institute/stage0_template_flask_mongo
          publish: pipenv
          type: api
          port: 8391
        - name: mentor_spa
          description: Mentor SPA
          template: agile-learning-institute/stage0_template_vue_vuetify
          publish: npm
          type: spa
          port: 8392
    - name: member
      description: Member User Journey Domain
      data_domains:
        controls:
          - Curriculum
          - Rating
          - Review
        creates:
          - Event
        consumes:
          - Resource
          - Path 
      repos:
        - name: member_api
          description: Member API
          template: agile-learning-institute/stage0_template_flask_mongo
          publish: pipenv
          type: api
          port: 8393 
        - name: member_spa
          description: Member SPA
          template: agile-learning-institute/stage0_template_vue_vuetify
          publish: npm
          type: spa
          port: 8394                  